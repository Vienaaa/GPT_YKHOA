/*!
 * gptx
 * Copyright (c) 2024 Rui Reogo
 * MIT Licensed
 */

import * as Types from '../Types';
import * as Utils from '../Utils';
import axios from 'axios';

async function Voids(
    messages: Types.Message[],
    model: Types.ProviderModels['Voids']
): Promise<string> {
    const url = 'https://api.voids.top/v1/chat/completions';

    const response = await axios.post(
        url,
        {
            messages: messages,
            model: model || 'gpt-4o-free'
        },
        {
            headers: Utils.getHeaders(url)
        }
    );

    if (
        response.data.choices &&
        response.data.choices.length > 0 &&
        response.data.choices[0].message &&
        response.data.choices[0].message.content
    ) {
        return response.data.choices[0].message.content.trim();
    }

    throw new Error('Invalid Response Structure');
}

export default Voids;
